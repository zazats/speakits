<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv=”Permissions-Policy” content=”interest-cohort=()”>
    <title>S P E A K I T S</title>
    <script src="speakits_viewer_files/three.min.js"></script>
    <script src="speakits_viewer_files/panolens.min.js"></script>
    <style>
    .center {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        width: 100%;
        border: 0px;
        background-image: url("assets/mike.png");
    }
    </style>
    
    <style>
    html,
    body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      margin: 0;
    }

    #container {
      width: 100%;
      height: 100%;
    }
        
    .button {
        background-color: #4CAF50;
        color: white;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
        
  </style>

</head>

<body>
    <div id="btn" class="center">
        Turn your phone to the horizontal position, click the Start button below and inset it in the VR Set
        <button class="button" onclick="loadVenue()">Start</button>
    </div>

    <div id="container"></div>
<script>
    //DeviceOrientationEvent.requestPermission();
    
    var panorama, viewer, container;

    function loadVenue(){
    
    document.getElementById("btn").style.display = "none";
    
    container = document.querySelector('#container');
    const urlParams = new URL(window.location.toLocaleString()).searchParams;
    imageFile = urlParams.get('image');
    panorama = new PANOLENS.ImagePanorama( 'assets/' + imageFile );
    //panorama = new PANOLENS.ImagePanorama( 'assets/v1_l1.jpg' );
    //panorama = new PANOLENS.VideoPanorama( 'assets/360video3.mp4' )
    viewer = new PANOLENS.Viewer({container : container});
    //viewer = new PANOLENS.Viewer();
    viewer.add( panorama );
    viewer.enableControl( 1 );
    viewer.enableEffect( 2 );
    //viewer.setCameraControl();
    viewer.setCameraFov(130);
    //container.requestFullscreen(); //doesn't work for Safari. Also, dosn't look great in the VR Set
    }
</script>
</body>
</html>
